{% extends 'accounts/onboarding/base.html' %}

{% block title %}Privacy - CSU Tracker{% endblock %}

{% block content %}
<div class="onboarding-step">
    <div class="onboarding-step__emoji">ðŸ”’</div>
    
    <h1 class="onboarding-step__title">
        Your privacy, our priority
    </h1>
    
    <p class="onboarding-step__subtitle">
        We're transparent about how we handle your health data. No surprises.
    </p>
    
    <form method="post" class="onboarding-form" id="privacy-form">
        {% csrf_token %}
        <input type="hidden" name="action" value="next" id="form-action">
        
        <!-- Data Transparency Section -->
        <div class="onboarding-privacy-card">
            <h2 class="onboarding-privacy-card__title">What happens with your data</h2>
            
            <div class="onboarding-privacy-list">
                <div class="onboarding-privacy-item onboarding-privacy-item--positive">
                    <div class="onboarding-privacy-item__icon">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                    </div>
                    <div class="onboarding-privacy-item__content">
                        <strong>Encrypted storage</strong>
                        <span>Your data is encrypted at rest and in transit</span>
                    </div>
                </div>
                
                <div class="onboarding-privacy-item onboarding-privacy-item--positive">
                    <div class="onboarding-privacy-item__icon">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                    </div>
                    <div class="onboarding-privacy-item__content">
                        <strong>Your eyes only</strong>
                        <span>Data is used only to show YOU your patterns</span>
                    </div>
                </div>
                
                <div class="onboarding-privacy-item onboarding-privacy-item--positive">
                    <div class="onboarding-privacy-item__icon">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                    </div>
                    <div class="onboarding-privacy-item__content">
                        <strong>Full control</strong>
                        <span>Delete your account and all data anytime</span>
                    </div>
                </div>
                
                <div class="onboarding-privacy-divider"></div>
                
                <div class="onboarding-privacy-item onboarding-privacy-item--negative">
                    <div class="onboarding-privacy-item__icon">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </div>
                    <div class="onboarding-privacy-item__content">
                        <strong>No data selling</strong>
                        <span>We never sell your information to anyone</span>
                    </div>
                </div>
                
                <div class="onboarding-privacy-item onboarding-privacy-item--negative">
                    <div class="onboarding-privacy-item__icon">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </div>
                    <div class="onboarding-privacy-item__content">
                        <strong>No ad targeting</strong>
                        <span>Your health data is never used for ads</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Consent Checkboxes -->
        <div class="onboarding-consent-section">
            <label class="onboarding-consent-checkbox">
                <input type="checkbox" name="privacy_consent" value="true" 
                       {% if form.privacy_consent.value %}checked{% endif %}
                       class="onboarding-consent-checkbox__input" required>
                <span class="onboarding-consent-checkbox__box">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                </span>
                <span class="onboarding-consent-checkbox__label">
                    I agree to the <a href="{% url 'accounts:privacy' %}" target="_blank">Privacy Policy</a>
                    <span class="onboarding-consent-checkbox__badge onboarding-consent-checkbox__badge--required">Required</span>
                </span>
            </label>
            
            <label class="onboarding-consent-checkbox">
                <input type="checkbox" name="allow_analytics" value="true"
                       {% if form.allow_analytics.value %}checked{% endif %}
                       class="onboarding-consent-checkbox__input">
                <span class="onboarding-consent-checkbox__box">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                </span>
                <span class="onboarding-consent-checkbox__label">
                    Help improve the app with anonymous usage data
                    <span class="onboarding-consent-checkbox__badge onboarding-consent-checkbox__badge--optional">Optional</span>
                </span>
            </label>
        </div>
        
        {% if form.errors %}
        <div class="onboarding-error">
            Please accept the Privacy Policy to continue.
        </div>
        {% endif %}
    </form>
</div>
{% endblock %}

{% block navigation %}
<button type="submit" form="privacy-form" class="btn btn--primary btn--lg btn--full">
    I understandâ€”continue
</button>

<div class="onboarding-nav-row">
    <button type="button" onclick="document.getElementById('form-action').value='back'; document.getElementById('privacy-form').submit();" class="btn btn--ghost">
        Back
    </button>
</div>
{% endblock %}
