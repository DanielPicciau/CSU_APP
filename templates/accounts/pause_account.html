{% extends 'base_new.html' %}
{% load static %}

{% block title %}Pause Account - CSU Tracker{% endblock %}

{% block extra_head %}
<style>
.pause-zone {
    background: var(--color-warning-50);
    border: 2px solid var(--color-warning-200);
    border-radius: var(--radius-xl);
    padding: var(--space-5);
}
[data-theme="dark"] .pause-zone {
    background: rgba(245, 158, 11, 0.1);
    border-color: var(--color-warning-700);
}
@media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) .pause-zone {
        background: rgba(245, 158, 11, 0.1);
        border-color: var(--color-warning-700);
    }
}
.pause-zone__header {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin-bottom: var(--space-4);
}
.pause-zone__icon {
    width: 48px;
    height: 48px;
    background: var(--color-warning-100);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}
[data-theme="dark"] .pause-zone__icon {
    background: rgba(245, 158, 11, 0.2);
}
@media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) .pause-zone__icon {
        background: rgba(245, 158, 11, 0.2);
    }
}
.pause-zone__title {
    font-size: var(--text-lg);
    font-weight: 700;
    color: var(--color-warning-600);
}
[data-theme="dark"] .pause-zone__title {
    color: var(--color-warning-400);
}
@media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) .pause-zone__title {
        color: var(--color-warning-400);
    }
}
.pause-zone__subtitle {
    font-size: var(--text-sm);
    color: var(--color-warning-500);
}
.info-list {
    background: var(--bg-primary);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    margin-bottom: var(--space-5);
}
.info-list__title {
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--space-3);
}
.info-list__items {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}
.info-list__item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--text-secondary);
}
.info-list__item svg {
    color: var(--color-warning-500);
    flex-shrink: 0;
}
.info-list__item--positive svg {
    color: var(--color-success-500);
}
.confirm-checkbox {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-4);
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
    cursor: pointer;
}
.confirm-checkbox input {
    margin-top: 2px;
    accent-color: var(--color-warning-500);
}
.confirm-checkbox__text {
    font-size: var(--text-sm);
    color: var(--text-primary);
}
.legal-note {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    margin-bottom: var(--space-4);
}
.legal-note__title {
    font-size: var(--text-xs);
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: var(--space-2);
}
.legal-note__text {
    font-size: var(--text-sm);
    color: var(--text-tertiary);
    line-height: 1.5;
}
</style>
{% endblock %}

{% block header_left %}
<a href="{% url 'accounts:privacy' %}" class="btn btn--icon btn--ghost" aria-label="Back to privacy settings">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
</a>
{% endblock %}

{% block header_title %}Pause Account{% endblock %}

{% block content %}
<div class="app-content fade-in">
    
    <!-- Pause Zone -->
    <div class="pause-zone">
        <div class="pause-zone__header">
            <div class="pause-zone__icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--color-warning-500)" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="10" y1="15" x2="10" y2="9"/>
                    <line x1="14" y1="15" x2="14" y2="9"/>
                </svg>
            </div>
            <div>
                <h2 class="pause-zone__title">Pause Your Account</h2>
                <p class="pause-zone__subtitle">Right to Restrict Processing</p>
            </div>
        </div>
        
        <!-- What happens when paused -->
        <div class="info-list">
            <h3 class="info-list__title">What happens when you pause:</h3>
            <div class="info-list__items">
                <div class="info-list__item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="10" y1="15" x2="10" y2="9"/>
                        <line x1="14" y1="15" x2="14" y2="9"/>
                    </svg>
                    <span>Your data will be retained but not processed</span>
                </div>
                <div class="info-list__item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="10" y1="15" x2="10" y2="9"/>
                        <line x1="14" y1="15" x2="14" y2="9"/>
                    </svg>
                    <span>Symptom tracking will be disabled</span>
                </div>
                <div class="info-list__item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="10" y1="15" x2="10" y2="9"/>
                        <line x1="14" y1="15" x2="14" y2="9"/>
                    </svg>
                    <span>Reports won't be generated</span>
                </div>
                <div class="info-list__item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="10" y1="15" x2="10" y2="9"/>
                        <line x1="14" y1="15" x2="14" y2="9"/>
                    </svg>
                    <span>Notifications will be suspended</span>
                </div>
            </div>
        </div>
        
        <!-- What you can still do -->
        <div class="info-list">
            <h3 class="info-list__title">What you can still do:</h3>
            <div class="info-list__items">
                <div class="info-list__item info-list__item--positive">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                    <span>Log in to your account</span>
                </div>
                <div class="info-list__item info-list__item--positive">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                    <span>Export your existing data</span>
                </div>
                <div class="info-list__item info-list__item--positive">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                    <span>Resume your account at any time</span>
                </div>
                <div class="info-list__item info-list__item--positive">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                    <span>Delete your account if you wish</span>
                </div>
            </div>
        </div>
        
        <!-- Legal note -->
        <div class="legal-note">
            <h4 class="legal-note__title">Your Rights</h4>
            <p class="legal-note__text">
                Under GDPR Article 18, you have the right to restrict the processing of your personal data. 
                When you pause your account, we will store your data but will not use it for any processing 
                activities until you choose to resume.
            </p>
        </div>
        
        <!-- Confirmation Form -->
        <form method="post">
            {% csrf_token %}
            
            {% if form.errors %}
            <div class="feedback-banner feedback-banner--error mb-4">
                <svg class="feedback-banner__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>
                </svg>
                <span class="feedback-banner__text">
                    {% for field, errors in form.errors.items %}
                        {% for error in errors %}{{ error }}{% if not forloop.last %} {% endif %}{% endfor %}
                    {% endfor %}
                </span>
            </div>
            {% endif %}

            <div class="form-group">
                <label class="form-label" for="id_current_password">Confirm Your Password</label>
                <input type="password" name="current_password" id="id_current_password" class="form-input"
                       placeholder="Enter your password" autocomplete="current-password" required>
                <p class="form-helper">Enter your current password to continue</p>
            </div>
            
            <label class="confirm-checkbox">
                <input type="checkbox" name="understand" required>
                <span class="confirm-checkbox__text">
                    I understand that while my account is paused, my data will be <strong>retained but not processed</strong>.
                </span>
            </label>
            
            <button type="submit" class="btn btn--full" 
                    style="background: var(--color-warning-500); color: white; border: none;">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="10" y1="15" x2="10" y2="9"/>
                    <line x1="14" y1="15" x2="14" y2="9"/>
                </svg>
                Pause My Account
            </button>
        </form>
    </div>
    
    <a href="{% url 'accounts:privacy' %}" class="btn btn--ghost btn--full mt-4">
        Cancel
    </a>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/components.js' %}"></script>
{% endblock %}
